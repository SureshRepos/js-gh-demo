name: Build Next.js web app
on: push
  with: 'master'

jobs:
  build-project:
    name: Build Project
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code from repo
        uses: actions/checkout@v4
      - name: install NPM dependecies
        run: npm install
      - name: Build project assets
        run: npm run build
      - name: Upload Build artifact
        uses: actions/upload-artifact@v4
        with: 
          name: static-site
          path: .next/
  
  release-project:
    name: Release Project
    runs-on: ubuntu-latest
    needs: build-project

    steps:
      - name: Download Site Content
        uses: actions/download-artifact@v4
        with:
          - name: static-site
      - name: Display structure of download files
        run: ls -R
    
